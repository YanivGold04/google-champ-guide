<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gmail Search Mission (Lovable Fit)</title>
<style>
  html, body { margin:0; padding:0; height:100%; width:100%; background:#fff; overflow:hidden; }
  body { font-family:Arial, sans-serif; display:flex; justify-content:center; align-items:center; }
  #simulator { width:100%; height:100%; background:#fff; position:relative; overflow:hidden; }
  .screen { position:absolute; inset:0; display:none; }
  .screen.active { display:block; }
  .stage-img { width:100%; height:100%; object-fit:cover; user-select:none; -webkit-user-drag:none; }
  .hotspot { position:absolute; cursor:pointer; }
  .hint { position:absolute; left:50%; transform:translateX(-50%); bottom:10px; background:#111; color:#fff; padding:6px 10px; border-radius:6px; font-size:12px; opacity:.9; display:none; }
  .toggle { position:absolute; top:8px; right:8px; font-size:11px; background:#eee; border:1px solid #ccc; border-radius:6px; padding:4px 8px; cursor:pointer; opacity:.7; }
  .debug .hotspot { background:rgba(0,128,255,.22); outline:1px dashed #0863c8; }
</style>
</head>
<body>
<div id="simulator">
  <button id="dbgBtn" class="toggle">Debug: off</button>
  <div id="hint" class="hint"></div>

  <div id="screen1" class="screen active" onclick="wrong(1)">
    <img class="stage-img" src="search_first.png" alt="Search bar">
    <div class="hotspot" style="top:4%;left:22%;width:55%;height:9%;" onclick="evtStop(event);goTo(2)"></div>
  </div>

  <div id="screen2" class="screen">
    <img class="stage-img" src="search_second.png" alt="Typing search">
  </div>

  <div id="screen3" class="screen" onclick="wrong(3)">
    <img class="stage-img" src="search_third.png" alt="Search results button">
    <div class="hotspot" style="top:45%;left:20%;width:60%;height:9%;" onclick="evtStop(event);goTo(4)"></div>
  </div>

  <div id="screen4" class="screen" onclick="goTo(5)">
    <img class="stage-img" src="search_last.png" alt="Search complete">
  </div>

  <div id="screen5" class="screen">
    <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;">
      <div style="font-size:1.6rem;color:green;">âœ… Search completed successfully!</div>
    </div>
  </div>
</div>

<script>
const hints={1:'Hint: Click inside the search bar at the top.',3:'Hint: Select the row that says "All search results for immunai".'};
let typed=\"\";
function goTo(n){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById('screen'+n).classList.add('active');hideHint();}
function wrong(i){showHint(hints[i]);}
function showHint(m){const h=document.getElementById('hint');h.textContent=m;h.style.display='block';clearTimeout(window.__hintT);window.__hintT=setTimeout(()=>h.style.display='none',1800);}
function hideHint(){document.getElementById('hint').style.display='none';}
function evtStop(e){e.stopPropagation();}

// Typing simulation: trigger after typing 'i'
window.addEventListener('keydown', (e) => {
  const active=document.querySelector('.screen.active');
  if(active && active.id==='screen2'){
    typed+=e.key.toLowerCase();
    if(typed.includes('i')){goTo(3);}
  }
});

const sim=document.getElementById('simulator'),btn=document.getElementById('dbgBtn');
btn.onclick=()=>{sim.classList.toggle('debug');btn.textContent='Debug: '+(sim.classList.contains('debug')?'on':'off');}
window.onkeydown=e=>{if(e.key.toLowerCase()==='d')btn.click();}
</script>
</body>
</html>
